!function($){$.timer=function(func,time,autostart){return this.set=function(func,time,autostart){if(this.init=!0,"object"==typeof func){var paramList=["autostart","time"];for(var arg in paramList)void 0!=func[paramList[arg]]&&eval(paramList[arg]+" = func[paramList[arg]]");func=func.action}return"function"==typeof func&&(this.action=func),isNaN(time)||(this.intervalTime=time),autostart&&!this.active&&(this.active=!0,this.setTimer()),this},this.once=function(t){var e=this;return isNaN(t)&&(t=0),window.setTimeout(function(){e.action()},t),this},this.play=function(t){return this.active||(t?this.setTimer():this.setTimer(this.remaining),this.active=!0),this},this.pause=function(){return this.active&&(this.active=!1,this.remaining-=new Date-this.last,this.clearTimer()),this},this.stop=function(){return this.active=!1,this.remaining=this.intervalTime,this.clearTimer(),this},this.toggle=function(t){return this.active?this.pause():t?this.play(!0):this.play(),this},this.reset=function(){return this.active=!1,this.play(!0),this},this.clearTimer=function(){window.clearTimeout(this.timeoutObject)},this.setTimer=function(t){var e=this;"function"==typeof this.action&&(isNaN(t)&&(t=this.intervalTime),this.remaining=t,this.last=new Date,this.clearTimer(),this.timeoutObject=window.setTimeout(function(){e.go()},t))},this.go=function(){this.active&&(this.action(),this.setTimer())},this.init?new $.timer(func,time,autostart):(this.set(func,time,autostart),this)},$.fn.polyglotLanguageSwitcher=function(t){function e(t){x[t.name]&&x[t.name].call($(this),t)}function i(){y||(e({name:"beforeOpen",element:v,instance:p}),d.addClass("active"),s(!0),setTimeout(function(){y=!0,e({name:"afterOpen",element:v,instance:p})},100))}function n(){y&&(e({name:"beforeClose",element:v,instance:p}),s(!1),d.removeClass("active"),y=!1,m&&m.active&&m.clearTimer(),e({name:"afterClose",element:v,instance:p}))}function a(){m&&m.active&&m.pause()}function r(){m&&m.play(!1)}function s(t){"fade"==x.effect?t?w.fadeIn(x.animSpeed):w.fadeOut(x.animSpeed):t?w.slideDown(x.animSpeed):w.slideUp(x.animSpeed)}function o(t){n();var e=$(t).children(":first-child"),i=$(e).attr("id"),a=$(e).text();$(w).children().each(function(){$(this).detach()});for(var r=0;r<b.length;r++)$(b[r]).children(":first-child").attr("id")!=i&&w.append(b[r]);var s=d.children(":first-child");d.attr("id",i),d.text(a),d.append(s)}function c(){$(document).click(function(){n()}),$(document).keyup(function(t){27==t.which&&n()}),"hover"==x.openMode&&(m=$.timer(function(){n()}),m.set({time:x.hoverTimeout,autostart:!0}))}function h(){var t,e=$("#"+g+" > form > select > option");if(L){var n,s=window.location.href;e.each(function(){var t=$(this).attr("id");s.indexOf("/"+t+"/")>=0&&(n=t)})}e.each(function(){var e,s=$(this).attr("id");e=L?n===s:$(this).attr("selected");var o=f($(this));e&&(t=o),b.push(o),T>0?w.append(o):(d=$('<a id="'+$(this).attr("id")+'" class="current" href="javascript:void(0)">'+$(this).text()+' <span class="trigger">&raquo;</span></a>'),"hover"==x.openMode?d.hover(function(){i(),a()},function(){r()}):d.click(function(){i()})),T++}),$("#"+g+" form:first-child").remove(),v.append(d),v.append(w),t&&o(t)}function f(t){var i,n=$(t).attr("id"),s=$(t).attr("value"),c=$(t).text();if(L){var h=window.location.href,f=h.substring(h.lastIndexOf("/")+1),d="http://"+document.domain+"/"+x.pagePrefix+n+"/"+f;i=$('<li><a id="'+n+'" href="'+d+'">'+c+"</a></li>")}else{var m=document.URL,g=u();g[x.paramName]=s,m.indexOf("?")>0&&(m=m.substring(0,m.indexOf("?"))),m+=l(g),i=$('<li><a id="'+n+'" href="'+m+'">'+c+"</a></li>")}return i.bind("click",function(){e({name:"onChange",selectedItem:$(this).children(":first").attr("id"),element:v,instance:p}),o($(this))}),"hover"==x.openMode&&i.hover(function(){a()},function(){r()}),i}function u(){var t={},e=window.location.search.substr(1).split("&");if(e.length>0)for(var i=0;i<e.length;++i){var n=e[i].split("=");2==n.length&&(t[n[0]]=decodeURIComponent(n[1].replace(/\+/g," ")))}return t}function l(t){if(x.testMode)return"#";var e="?",i=0;for(var n in t){var a="";i>0&&(a="&"),e+=a+n+"="+t[n],i++}return e}var d,m,p=$.fn.polyglotLanguageSwitcher,v=$(this),g=$(this).attr("id"),w=$('<ul class="dropdown">'),T=0,y=!1,b=[],x=$.extend({},p.defaults,t),L="static"==x.websiteType;return h(),c(),p.open=function(){i()},p.close=function(){n()},e({name:"afterLoad",element:v,instance:p}),p};var ls=$.fn.polyglotLanguageSwitcher;ls.defaults={openMode:"click",hoverTimeout:1500,animSpeed:200,effect:"slide",paramName:"lang",pagePrefix:"",websiteType:"dynamic",testMode:!1,onChange:0/0,afterLoad:0/0,beforeOpen:0/0,afterOpen:0/0,beforeClose:0/0,afterClose:0/0}}(jQuery);